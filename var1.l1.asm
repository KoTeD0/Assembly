.MODEL small
.STACK 100h
.DATA
msg1 DB "Enter string: $"
msg3 DB 0Ah, 0Dh, "Result: $"
 
str1ml DB 200
str1l DB '$'
str1 DB 200 dup('$')
 
str2ml DB 200
str2l DB '$'
str2 DB 200 dup('$')
max dw ?
maxfirst dw ?
 
.CODE
begin:
mov ax, @data
mov ds, ax
mov es,ax
xor ax,ax
 
lea dx, msg1 ;????? ??????????? msg1
call strout
 
lea dx, str1ml ;???? ?????? str1
call strin
 
mov maxfirst,0
maxlen:
;-------------------------------------------------- ????? ?????
; ?????????? ?????? ???????? ?????
          mov   ch,0             ; ??????? ???? = 0
          mov   cl, str1l            ; ?????????? ???? (????????) ??? ????????????
          lea   di,str1           ; ????? ??????
          mov   al,' '            ; ??????? ?????? (??????)
          mov   dx,di             ; ?????? ?????? ???????? ????? ?? ?????? ??????
          mov   max,0            ; ????? ?????? ???????? ????? ?? ?????? ??????
        
find_space:
          mov   si,di             ; ????????? ????? ?????? ???????? ?????
          repne scasb             ; ??????????? ???? ?? ????? ???????  
          ; ?????????? ????? ?????
          mov   bx,di             ; ????????? ?? ????????? ?????? ????? ??????????
          sub   bx,si             ; ??????? ????? ?????? ?????
          jz    no_min            ; ??????? ???? ?????=0 (?????? 2 ???????)
          cmp   cx,0              ; ???? ??????????????? ??? ??????
          jz    end_str           ; ??????? ?? ?????
          dec   bx                ; ???????? ????? ?????, ?.?. di ???????? ?? ??????, ????????? ?? ????????
          jz    no_min            ; ??????? ???? ?????=0 (?????? 2 ???????)
end_str:
          cmp   bx,max            ; ????????? ????? ????? (??) ? ????? ??????? ?? ?????? ??????
          jbe  no_min             ; ???? ?????? ?????????????, ?? ???????
          mov max,bx
          mov   dx,si  
 
no_min:
          
          cmp   cx,0              ; ???? ??????????????? ?? ??? ??????
          jnz   find_space        ; ????? ??????? - ?????????? ????????????
          
          mov   si,dx             ; ????? ?????? ?????
          mov   bx, max
          
          
          
            cmp bx, 0
            je exit
            cmp bx, maxfirst      ;?????????? ??????????? ????? ????? ????? ????? ? ????????????? ????????? ???????????? ?????? 
            jb exit ; ???? ??????, ?? ????????? ????????? ???? ??????
            mov maxfirst, bx  ; ????? ??????????? ????? ???????????? ????? (??????????, ????????? ??)
          
          ; ??????? ????? ? Dx, ????? ?????? ???????? ????? ? Bx
          
        ;(Space)? ?????????? ????? ??????? ???????, ??????? ????? ????
        space:
        mov cl, byte ptr [si+bx]
        cmp cl,' '
        jne StartDelete
        inc bx
        jmp space
        ;(space)
;------------------------------------------------- ????? ?????? ?????
StartDelete:
 
mov str2l, bl ; ????????????? ????? ??????, ?????? ????? ?????????? ?????
xor cx, cx
mov cl, str1l ;??????????????? ???????????? ??????????
sub cl, str2l
inc cl
cld ;????? ??????
mov di, dx ;? di - ??????, ??????? ???? ?????
lea si, str1 ;? si - ??????, ? ??????? ????
xor ax, ax
 
all_string: ;??????????? ??? str1 ?? ????? ?????? ????? ????? str2
call sub_search
inc si
loop all_string
 
 
success:
;(len) ?????? ???????? ????? ??????? ?????? ??????????????? ????????????????, ??????? ????? ????????? ??????
mov bl, str1l 
sub bl, str2l
mov str1l, bl
;(len)
 
jmp maxlen; ??????? ? ??????????? ?????? (??????? ?????? ? ??????)
exit:
 
call nextstr ; ??????? ?? ????? ??????
 
;(result) ????? ??????????
lea dx, msg3 
call strout
lea dx, str1
call strout 
;(result)
 
;?????
mov ah, 4ch 
int 21h
 
 
;*****************?????????***********************
nextstr proc
push dx
push ax
mov dl, 0Dh ;??????? ?? ?????? ??????
mov ah, 02h
int 21h
mov dl, 0Ah
mov ah, 02h
int 21h
pop ax
pop dx
ret
nextstr endp
;*************************************************
strin proc
mov ah, 0Ah
int 21h
ret
strin endp
;*************************************************
strout proc
mov ah, 09h
int 21h
ret
strout endp
;*************************************************
sub_search proc ; ???????? ?????
push cx
push di
push si
mov bx, si
mov cl, str2l
repe cmpsb
je _eq
jne _neq
_eq:
;di ????????? ?? ?????? 2, si ????????? ?? ????? ?????, ??????? ???? ???????
call delete
inc al
jmp success
_neq:
pop si
pop di
pop cx
ret
sub_search endp
;*************************************************
delete proc
push bx
push di
push si
mov di, bx ;? di - ????? ?????? ?????????? ?????
xor cx, cx
mov cl, str1l
repe movsb
pop si
pop di
pop bx
ret
delete endp
 
end begin   